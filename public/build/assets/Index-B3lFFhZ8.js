import{_ as f}from"./AuthenticatedLayout-C8-gDfH1.js";import{k as a,Q as g,l as h,m as _,o as u,f as v,a as l,u as i,w as b,F as x,Z as y,b as o,c as U,g as w}from"./app-C_XvCAWz.js";import k from"./Contacts-C-49ovhi.js";import M from"./ChatArea-EABpwOB3.js";import"./ApplicationLogo-DtZ-iEdo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-B1abVlM6.js";const $={class:"flex h-screen overflow-hidden"},B={class:"w-1/4 bg-white border-r border-gray-300"},C=o("header",{class:"p-4 border-b border-gray-300 flex justify-between items-center bg-indigo-600 text-white"},[o("h1",{class:"text-2xl font-semibold"},"Chats")],-1),R={__name:"Index",props:["users"],setup(c){const p=a(c.users),r=a(null),t=a(null),n=g().props.auth.user;let s=a({status:!1,name:""});const m=e=>{t.value=e,s.value.status=!1,d()},d=async()=>{const e=await axios.get(route("chats.messages.get",{id:t.value.id}));r.value=e.data};return h(()=>{Echo.private(`App.Models.User.${n.id}`).listen("MessageSent",e=>{r.value.push(e.message)}).listenForWhisper("typing",e=>{e.id===t.value.id&&(s.value.status=!0,s.value.name=e.name)}).listenForWhisper("stop-typing",e=>{s.value.status=!1,s.value.name=""})}),_(()=>{Echo.leave(`App.Models.User.${n.id}`)}),(e,N)=>(u(),v(x,null,[l(i(y),{title:"Chats"}),l(f,null,{default:b(()=>[o("div",$,[o("div",B,[C,l(k,{users:p.value,onUserSelected:m},null,8,["users"])]),t.value?(u(),U(M,{key:0,fromUser:i(n),messages:r.value,toUser:t.value,typing:i(s)},null,8,["fromUser","messages","toUser","typing"])):w("",!0)])]),_:1})],64))}};export{R as default};
